
pcm.usb_codec_dmix {
    type dmix
    ipc_key 1024
    ipc_key_add_uid false # let multiple users share
    ipc_perm 0660 # IPC permissions (octal, default 0600)
    slave {
        pcm "hw:CARD=CODEC" # see below
        rate 44100
        channels 2
        period_time 0
        period_size 1024
        buffer_time 0
        buffer_size 4096
    }
}

pcm.ppFront {
    type plug
    slave {
        pcm "dmix:CARD=soundcard"
        channels 4
    }
    ttable.0.0 1
    ttable.1.1 1
}

pcm.ppRear {
    type plug
    slave {
        pcm "dmix:CARD=soundcard"
        channels 4
    }
    ttable.0.2 1
    ttable.1.3 1
}

pcm.ppAll {
    type plug
    slave {
         pcm "dmix:CARD=soundcard"
         channels 4
    }
    ttable.0.0 1
    ttable.1.1 1
    ttable.0.2 1
    ttable.1.3 1
}

# Softvol intances for software volume control
pcm.softvol_local_spotify {
    type            softvol
    slave {
        pcm         "usb_codec_dmix"
    }
    control {
        name        "softvol_locspot"
        card        0
    }
}

pcm.softvol_rem1_spotify {
    type            softvol
    slave {
        pcm         "ppFront"
    }
    control {
        name        "softvol_rem1spot"
        card        0
    }
}

pcm.softvol_rem2_spotify {
    type            softvol
    slave {
        pcm         "ppRear"
    }
    control {
        name        "softvol_rem2spot"
        card        0
    }
}

pcm.softvol_local_shairport {
    type            softvol
    slave {
        pcm         "usb_codec_dmix"
    }
    control {
        name        "softvol_locshair"
        card        0
    }
}

pcm.softvol_rem1_shairport {
    type            softvol
    slave {
        pcm         "ppFront"
    }
    control {
        name        "softvol_locshair"
        card        0
    }
}

pcm.softvol_rem2_shairport {
    type            softvol
    slave {
        pcm         "ppRear"
    }
    control {
        name        "softvol_locshair"
        card        0
    }
}

pcm.softvol_local_aux {
    type            softvol
    slave {
        pcm         "usb_codec_dmix"
    }
    control {
        name        "softvol_locaux"
        card        0
    }
}

pcm.softvol_rem1_aux {
    type            softvol
    slave {
        pcm         "ppFront"
    }
    control {
        name        "softvol_rem1aux"
        card        0
    }
}

pcm.softvol_rem2_aux {
    type            softvol
    slave {
        pcm         "ppRear"
    }
    control {
        name        "softvol_rem2aux"
        card        0
    }
}

# To "fix" the control issue...
pcm.dummy {
    type            softvol
    slave {
        pcm         "usb_codec_dmix"
    }
    control {
        name        "MasterThree"
        card        0
    }
}
